# PRD（v0.1）

**1. 项目概述**
- 产品名称：AI 推荐股票与期货策略系统（PC Web）
- 目标用户：C 端用户
- 范围：股票推荐、国内期货策略、市场动态、公开持仓/持股、新闻资讯、站内消息、会员体系、实名认证
- 约束：不提供交易指令；必须实名；单语言
 - 技术栈（简化）：前端 Vue，服务端 Go+Gin，数据库 MySQL+Redis，Admin 端 Vue

**2. 目标与指标**
- 目标
1. 提供每日股票与期货策略推荐
2. 提供实时市场动态与重要事件提醒
3. 提供公开持仓/持股信息参考
4. 会员体系支持高级功能与高频推荐
- 核心指标（MVP）
1. 推荐曝光-点击率
2. 推荐转化为订阅比例
3. 站内消息打开率
4. 会员转化率
5. 分享裂变率（分享访问 UV / 发起分享 UV）
6. 分享付费转化率（被邀请用户付费数 / 被邀请注册数）

**3. 用户与权限**
- 未实名用户：仅浏览公共信息，推荐内容脱敏
- 实名用户：可查看完整推荐、订阅推送
- 会员用户：可查看高频推荐、更多历史数据、更深度分析
- 会员用户：可浏览全部新闻资讯（含 VIP 分类）

**4. 业务流程**

**4.1 实名流程**
1. 用户提交实名信息
2. 系统调用实名服务校验
3. 校验通过自动放行，失败进入人工复核
4. 审核完成后更新用户实名状态

**4.2 股票推荐流程**
1. 数据接入与清洗
2. 模型/策略评分
3. 推荐生成与风险分级
4. 审核与发布
5. 用户推送与展示
6. 推荐效果回溯

**4.3 期货策略流程**
1. 合约数据与基差监控
2. 策略计算与套利识别
3. 点位生成与风险过滤
4. 审核与发布
5. 推送与跟踪表现

**4.4 市场动态流程**
1. 事件触发（行情阈值、公告、异动）
2. 内容生成与审核
3. 站内消息推送

**4.5 新闻资讯流程**
1. 运营创建新闻分类
2. 编辑发布新闻内容并上传附件
3. 内容审核后上线
4. 按会员等级进行浏览权限控制

**4.6 用户增长激励流程**
1. 用户生成个人分享链接
2. 被邀请用户通过链接注册并完成实名
3. 被邀请用户完成首充或首笔会员支付
4. 系统发放分享奖励并记录到账
5. 用户在奖励中心查看奖励与提现/抵扣状态

**5. 功能需求（按模块）**

**5.1 首页**
- 今日推荐概览（股票/期货）
- 市场动态摘要
- 风险提示入口
- 会员权益入口

**验收标准**
1. 推荐列表可正常展示且支持跳转详情
2. 市场动态卡片点击进入详情页
3. 未实名用户看到“实名提示”且部分内容脱敏

**5.2 股票推荐**
- 推荐列表
- 推荐详情（理由、评分、风险、建议仓位）
- 推荐历史表现曲线

**字段（推荐列表）**
- 标的代码、名称、推荐日期、评分、风险等级、理由摘要、状态

**字段（推荐详情）**
- 评分分项（技术面/基本面/情绪/资金流）
- 建议仓位区间、止盈止损、有效期、风险提示

**验收标准**
1. 列表支持按评分/风险等级排序
2. 详情页展示完整推荐理由与评分分项
3. 过期推荐有显著标识

**5.3 期货策略**
- 策略列表（多空方向、风险等级）
- 套利策略详情
- 套利点位与触发提醒
- 操作指导（方向、仓位、止盈止损、失效条件）

**字段（策略列表）**
- 合约名称、多空方向、风险等级、建议仓位、有效期

**字段（套利详情）**
- 套利类型、当前价差、历史分位、入场/出场/止损点位、触发条件

**字段（操作指导）**
- 指导方向、建议仓位、风险等级、预计持有期、失效条件、有效期

**验收标准**
1. 支持筛选套利类型
2. 套利点位与触发条件展示完整
3. 过期策略不可订阅
4. 操作指导必须包含止盈止损与失效条件

**5.4 市场动态**
- 异动推送（价格、成交量、持仓量）
- 重要事件（公告、政策、财报摘要）

**字段**
- 事件类型、触发时间、触发条件、摘要、关联标的

**验收标准**
1. 动态列表按时间倒序
2. 事件详情包含触发条件与数据来源

**5.5 公开持仓/持股**
- 机构持股
- 期货多空持仓结构

**字段**
- 机构名称、持股比例、披露日期、数据来源

**验收标准**
1. 数据必须展示披露日期
2. 数据来源必须可追溯

**5.6 订阅与消息**
- 订阅偏好设置
- 站内消息列表
- 消息详情

**字段**
- 订阅类型、频率、标的范围、通知渠道

**验收标准**
1. 订阅变更即时生效
2. 消息状态支持已读/未读

**5.7 会员体系**
- 会员等级与权益
- 购买与订单记录
- 会员专属推荐
- VIP 配额配置：阅读文档数量、订阅资讯数量
- VIP 配额展示：已用/剩余数量

**验收标准**
1. 会员权益与实际功能一致
2. 非会员访问会员功能提示升级
3. 超过 VIP 配额时提示升级或等待配额重置

**配额计数口径**
1. 阅读文档计数：同一用户在同一周期内首次打开同一文档计 1 次，重复打开不重复计数
2. 资讯订阅计数：创建订阅时占用配额，取消订阅后立即释放
3. 配额重置：`DAILY` 在自然日 00:00 重置，`MONTHLY` 在自然月 1 日 00:00 重置
4. 超限返回：统一返回配额超限错误码与剩余额度信息

**5.8 实名认证**
- 实名信息提交
- 状态展示
- 审核结果通知

**字段**
- 姓名、身份证号、认证状态、审核时间

**验收标准**
1. 未实名用户无法查看完整推荐
2. 实名通过后解锁权限

**5.9 新闻资讯**
- 新闻分类列表
- 新闻列表与详情
- 新闻附件下载
- VIP 全量浏览控制

**字段**
- 新闻标题、分类、摘要、正文、标签、发布时间、附件列表、可见范围

**验收标准**
1. 新闻支持按分类筛选
2. 新闻详情支持附件上传与下载
3. 非 VIP 用户仅可查看公开新闻，VIP 用户可查看全部新闻

**5.10 客户浏览历史**
- 浏览历史列表（股票、期货、新闻）
- 最近浏览排序
- 历史清理

**字段**
- 用户 ID、内容类型、内容 ID、浏览时间、来源页面

**验收标准**
1. 浏览详情页后自动写入历史
2. 历史按时间倒序展示
3. 支持单条删除与全部清空

**5.11 客户充值记录**
- 充值记录列表
- 订单状态查询
- 失败原因展示

**字段**
- 订单号、充值金额、支付渠道、状态、支付时间、备注

**验收标准**
1. 支持按时间和状态筛选
2. 记录与支付结果一致
3. 支持导出最近 3 个月充值记录

**5.12 客户分享链接**
- 个人专属分享链接生成
- 渠道参数（来源、活动位）追踪
- 分享落地页

**字段**
- 分享码、分享链接、创建时间、失效时间、渠道标识

**验收标准**
1. 每个用户至少有 1 个可用分享链接
2. 支持按渠道追踪注册转化
3. 失效链接不可继续产生归因

**5.13 客户分享奖励**
- 奖励规则展示
- 奖励明细与到账状态
- 奖励余额与使用记录

**字段**
- 奖励类型、触发事件、奖励金额/天数、发放状态、发放时间、关联被邀请用户

**验收标准**
1. 首充、会员首购等触发奖励自动发放
2. 同一被邀请用户仅触发一次首购奖励
3. 可疑刷邀请行为自动进入风控待审核

**5.14 奖励账户与结算**
- 奖励账户余额（现金、券、VIP 天数）
- 提现申请与审核
- 奖励抵扣会员订单
- 结算失败回滚

**字段**
- 奖励账户余额、冻结金额、可提现金额、提现单号、提现状态、审核原因、到账时间

**验收标准**
1. 现金奖励必须先入账奖励账户后再提现
2. 提现需经过审核流并保留审计记录
3. 结算失败自动回滚账户余额

**5.15 支付回调与对账**
- 支付回调验签
- 回调幂等处理
- 日对账与补单
- 异常订单告警

**字段**
- 渠道交易号、回调状态、验签结果、幂等键、对账批次号、差异原因

**验收标准**
1. 同一支付回调重复请求不得重复入账
2. 对账任务每日执行并生成差异清单
3. 差异订单支持人工补单和重试

**5.16 附件安全下载**
- 附件签名 URL 下载
- 附件权限校验（VIP/实名）
- 防盗链和过期控制

**验收标准**
1. 直接访问源文件地址必须被拒绝
2. 签名链接必须有有效期
3. 下载行为写入审计日志

**6. 管理后台功能**

**6.1 策略管理**
- 创建/编辑策略
- 策略审核与发布
- 版本管理
- 套利参数配置（窗口、分位、Z-score 阈值）

**验收标准**
1. 策略需审核后才能发布
2. 每次发布记录版本与操作者

**6.2 推荐审核**
- 推荐列表审核
- 风险提示审核

**验收标准**
1. 未审核内容不能对外展示

**6.3 数据源管理**
- 数据供应商配置
- 授权与访问审计

**验收标准**
1. 每次数据调用有日志记录

**6.4 用户与实名管理**
- 用户状态管理
- 实名审核列表

**验收标准**
1. 支持实名审核操作与记录

**6.5 新闻资讯管理**
- 分类管理（新增、编辑、上下线）
- 新闻管理（新增、编辑、审核、发布）
- 附件管理（上传、删除、下载）

**验收标准**
1. 新闻发布前必须通过审核
2. 附件操作有审计记录

**6.6 增长与奖励管理**
- 分享活动配置（奖励规则、时间窗、封顶额度）
- 邀请关系查询与申诉处理
- 奖励审核与风控处理

**验收标准**
1. 奖励规则变更需记录版本与生效时间
2. 奖励发放与风控拦截均有审计日志

**6.6.1 反作弊规则配置**
- 规则参数配置（同设备阈值、同 IP 阈值、同支付账号阈值）
- 风险命中日志查询
- 人工复核与申诉处理

**验收标准**
1. 规则可灰度生效并支持回滚
2. 命中记录可追溯到原始事件

**6.7 会员配额管理**
- 会员等级配额配置（按等级配置阅读文档上限、订阅资讯上限）
- 配额周期配置（按日/按月重置）
- 用户配额查询与手工调整

**验收标准**
1. 配额配置变更可追溯（操作人、变更前后值）
2. 配额超限时客户端拦截并返回明确提示
3. 配额按周期自动重置

**6.8 支付与对账管理**
- 支付回调日志查询（验签、幂等、处理结果）
- 日对账批次管理（差异清单、重试补单）
- 异常告警与处理记录

**验收标准**
1. 回调重复请求不会重复入账
2. 对账差异可追踪到订单级
3. 补单操作有审计日志

**7. 权限与风控规则**
- 未实名：仅基础信息
- 实名：完整推荐
- 会员：高频推荐与深度分析
- 会员：可浏览全部新闻资讯
- 会员：受会员等级配额限制（阅读文档数量、订阅资讯数量）
- 分享奖励：同设备/同实名/同支付账号重复触发需拦截
- 合规提示：页面固定风险提示入口

**8. 非功能需求**
- 性能：首页首屏 < 2s
- 可用性：核心接口 99.9%
- 安全：实名数据加密存储，访问审计
- 兼容：PC Web 主流浏览器

**9. 里程碑**
- M1：PC Web + 股票推荐 + 实名 + 站内消息 + 新闻资讯基础
- M2：期货策略 + 套利模块
- M3：会员 + 运营报表

**10. 数据方案指引**
- A 股数据获取与分析落地方案见：
- `/Users/gjhan21/cursor/sercherai/docs/A股数据获取与分析方案.md`
- 期货套利与操作指导方案见：
- `/Users/gjhan21/cursor/sercherai/docs/期货套利与操作指导方案.md`
